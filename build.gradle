plugins {
    id "java"
    id "groovy"
    id "org.springframework.boot" version "2.1.6.RELEASE"
    id "io.spring.dependency-management" version "1.0.8.RELEASE"
    id "org.jruyi.thrift" version "0.4.1"
}

group = "ru.osipov"
version = "0.0.1-SNAPSHOT"

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

repositories {
    jcenter()
}

dependencies {
    implementation "org.springframework.boot:spring-boot-starter-web"
    annotationProcessor "org.springframework.boot:spring-boot-configuration-processor"

    compileOnly "org.projectlombok:lombok"
    annotationProcessor "org.projectlombok:lombok"

    implementation "org.mapstruct:mapstruct:1.3.0.Final"
    annotationProcessor "org.mapstruct:mapstruct-processor:1.3.0.Final"

    implementation "org.apache.thrift:libthrift:0.12.0"
    implementation 'org.reflections:reflections:0.9.11'

    testImplementation "org.springframework.boot:spring-boot-starter-test"
    testImplementation "org.codehaus.groovy:groovy-all:2.5.7"
}

compileThrift {
    sourceDir "$projectDir/src/test/thrift"
    generator "java"
}

test.dependsOn("compileThrift")
